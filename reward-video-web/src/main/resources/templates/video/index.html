<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>电影</title>
    <meta name="viewport"
        content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

    <meta name="description" content="高速在线观看，无需下载播放器。">
    <meta name="keywords" content="电影">
    <meta name="generator" content="CMS">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link th:href="@{/video/pagination.min.css}" rel="stylesheet" type="text/css" />
    <link th:href="@{/video/detail/all-responsive-metal.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/video/jquery.fancybox-metal.css}" rel="stylesheet" type="text/css">
    <script src="http://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
    <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.3/style/weui.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.1/css/jquery-weui.min.css">
    <script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
    <script th:src="@{/video/analytics.js}"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
    <script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/jquery-weui.min.js"></script>

    <style type="text/css">
        .at-icon-wrapper {
            display: inline-block;
            overflow: hidden
        }

        a .at-icon-wrapper {
            cursor: pointer
        }

        .at-rounded,
        .at-rounded-element .at-icon-wrapper {
            border-radius: 12%
        }

        .at-circular,
        .at-circular-element .at-icon-wrapper {
            border-radius: 50%
        }

        .addthis_32x32_style .at-icon {
            width: 2pc;
            height: 2pc
        }

        .addthis_24x24_style .at-icon {
            width: 24px;
            height: 24px
        }

        .addthis_20x20_style .at-icon {
            width: 20px;
            height: 20px
        }

        .addthis_16x16_style .at-icon {
            width: 1pc;
            height: 1pc
        }

        #at16lb {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1001;
            background-color: #000;
            opacity: .001
        }

        #at_complete,
        #at_error,
        #at_share,
        #at_success {
            position: static !important
        }

        .at15dn {
            display: none
        }

        #at15s,
        #at16p,
        #at16p form input,
        #at16p label,
        #at16p textarea,
        #at_share .at_item {
            font-family: arial, helvetica, tahoma, verdana, sans-serif !important;
            font-size: 9pt !important;
            outline-style: none;
            outline-width: 0;
            line-height: 1em
        }

        * html #at15s.mmborder {
            position: absolute !important
        }

        #at15s.mmborder {
            position: fixed !important;
            width: 250px !important
        }

        #at15s a,
        #at15s span {
            outline: 0;
            direction: ltr;
            text-transform: none
        }

        #at15s .at-label {
            margin-left: 5px
        }

        #at15s .at-icon-wrapper {
            width: 1pc;
            height: 1pc;
            vertical-align: middle
        }

        #at15s .at-icon {
            width: 1pc;
            height: 1pc
        }

        .at4-icon {
            display: inline-block;
            background-repeat: no-repeat;
            background-position: top left;
            margin: 0;
            overflow: hidden;
            cursor: pointer
        }

        .addthis_16x16_style .at4-icon,
        .addthis_default_style .at4-icon,
        .at4-icon,
        .at-16x16 {
            width: 1pc;
            height: 1pc;
            line-height: 1pc;
            background-size: 1pc !important
        }

        .addthis_32x32_style .at4-icon,
        .at-32x32 {
            width: 2pc;
            height: 2pc;
            line-height: 2pc;
            background-size: 2pc !important
        }

        .addthis_24x24_style .at4-icon,
        .at-24x24 {
            width: 24px;
            height: 24px;
            line-height: 24px;
            background-size: 24px !important
        }

        .addthis_20x20_style .at4-icon,
        .at-20x20 {
            width: 20px;
            height: 20px;
            line-height: 20px;
            background-size: 20px !important
        }

        .at4-icon.circular,
        .circular .at4-icon,
        .circular.aticon {
            border-radius: 50%
        }

        .at4-icon.rounded,
        .rounded .at4-icon {
            border-radius: 4px
        }

        .at4-icon-left {
            float: left
        }

        #at15s .at4-icon {
            text-indent: 20px;
            padding: 0;
            overflow: visible;
            white-space: nowrap;
            background-size: 1pc;
            width: 1pc;
            height: 1pc;
            background-position: top left;
            display: inline-block;
            line-height: 1pc
        }

        .addthis_vertical_style .at4-icon,
        .at4-follow-container .at4-icon {
            margin-right: 5px
        }

        html>body #at15s {
            width: 250px !important
        }

        #at15s.atm {
            background: none !important;
            padding: 0 !important;
            width: 10pc !important
        }

        #at15s_inner {
            background: #fff;
            border: 1px solid #fff;
            margin: 0
        }

        #at15s_head {
            position: relative;
            background: #f2f2f2;
            padding: 4px;
            cursor: default;
            border-bottom: 1px solid #e5e5e5
        }

        .at15s_head_success {
            background: #cafd99 !important;
            border-bottom: 1px solid #a9d582 !important
        }

        .at15s_head_success a,
        .at15s_head_success span {
            color: #000 !important;
            text-decoration: none
        }

        #at15s_brand,
        #at15sptx,
        #at16_brand {
            position: absolute
        }

        #at15s_brand {
            top: 4px;
            right: 4px
        }

        .at15s_brandx {
            right: 20px !important
        }

        a#at15sptx {
            top: 4px;
            right: 4px;
            text-decoration: none;
            color: #4c4c4c;
            font-weight: 700
        }

        #at15sptx:hover {
            text-decoration: underline
        }

        #at16_brand {
            top: 5px;
            right: 30px;
            cursor: default
        }

        #at_hover {
            padding: 4px
        }

        #at_hover .at_item,
        #at_share .at_item {
            background: #fff !important;
            float: left !important;
            color: #4c4c4c !important
        }

        #at_share .at_item .at-icon-wrapper {
            margin-right: 5px
        }

        #at_hover .at_bold {
            font-weight: 700;
            color: #000 !important
        }

        #at_hover .at_item {
            width: 7pc !important;
            padding: 2px 3px !important;
            margin: 1px;
            text-decoration: none !important
        }

        #at_hover .at_item.athov,
        #at_hover .at_item:focus,
        #at_hover .at_item:hover {
            margin: 0 !important
        }

        #at_hover .at_item.athov,
        #at_hover .at_item:focus,
        #at_hover .at_item:hover,
        #at_share .at_item.athov,
        #at_share .at_item:hover {
            background: #f2f2f2 !important;
            border: 1px solid #e5e5e5;
            color: #000 !important;
            text-decoration: none
        }

        .ipad #at_hover .at_item:focus {
            background: #fff !important;
            border: 1px solid #fff
        }

        .at15t {
            display: block !important;
            height: 1pc !important;
            line-height: 1pc !important;
            padding-left: 20px !important;
            background-position: 0 0;
            text-align: left
        }

        .addthis_button,
        .at15t {
            cursor: pointer
        }

        .addthis_toolbox a.at300b,
        .addthis_toolbox a.at300m {
            width: auto
        }

        .addthis_toolbox a {
            margin-bottom: 5px;
            line-height: initial
        }

        .addthis_toolbox.addthis_vertical_style {
            width: 200px
        }

        .addthis_button_facebook_like .fb_iframe_widget {
            line-height: 100%
        }

        .addthis_toolbox.addthis_vertical_style a {
            display: block
        }

        .addthis_toolbox.addthis_vertical_style.addthis_32x32_style a {
            line-height: 2pc;
            height: 2pc
        }

        .addthis_toolbox.addthis_vertical_style .at300bs {
            margin-right: 4px;
            float: left
        }

        .addthis_toolbox.addthis_20x20_style span {
            line-height: 20px
        }

        .addthis_toolbox.addthis_32x32_style span {
            line-height: 2pc
        }

        .addthis_toolbox.addthis_pill_combo_style .addthis_button_compact .at15t_compact,
        .addthis_toolbox.addthis_pill_combo_style a {
            float: left
        }

        .addthis_toolbox.addthis_pill_combo_style a.addthis_button_tweet {
            margin-top: -2px
        }

        .addthis_toolbox.addthis_pill_combo_style .addthis_button_compact .at15t_compact {
            margin-right: 4px
        }

        .addthis_default_style .addthis_separator {
            margin: 0 5px;
            display: inline
        }

        div.atclear {
            clear: both
        }

        .addthis_default_style .addthis_separator,
        .addthis_default_style .at4-icon,
        .addthis_default_style .at300b,
        .addthis_default_style .at300bo,
        .addthis_default_style .at300bs,
        .addthis_default_style .at300m {
            float: left
        }

        .at300b img,
        .at300bo img {
            border: 0
        }

        a.at300b .at4-icon,
        a.at300m .at4-icon {
            display: block
        }

        .addthis_default_style .at300b,
        .addthis_default_style .at300bo,
        .addthis_default_style .at300m {
            padding: 0 2px
        }


        .addthis_20x20_style .at15t,
        .addthis_20x20_style .at300bs {
            overflow: hidden;
            display: block;
            height: 20px !important;
            width: 20px !important;
            line-height: 20px !important
        }

        #at16pt a,
        #at16pt h4 {
            font-weight: 700
        }

        #at16pt h4 {
            display: inline;
            margin: 0;
            padding: 0;
            font-size: 9pt;
            color: #4c4c4c;
            cursor: default
        }

        #at16pt a {
            position: absolute;
            top: 5px;
            right: 10px;
            color: #4c4c4c;
            text-decoration: none;
            padding: 2px
        }

        #at15s #at16pf a {
            top: 1px
        }

        .atm-s a:focus {
            border: transparent;
            outline: 0;
            transition: none
        }

        #at_hover.atm-s a,
        .atm-s a {
            display: block;
            text-decoration: none;
            padding: 4px 10px;
            color: #235dab !important;
            font-weight: 400;
            font-style: normal;
            transition: none
        }

        #at_hover.atm-s a:hover,
        .atm-s a:hover {
            background: #2095f0;
            text-decoration: none;
            color: #fff !important
        }

        .at-share-tbx-element .fb_iframe_widget span {
            vertical-align: baseline !important
        }

        @media print {

            #at4-follow,
            #at4-share,
            #at4-thankyou,
            #at4-whatsnext,
            #at4m-mobile,
            #at15s,
            .at4,
            .at4-recommended {
                display: none !important
            }
        }

        @media screen and (max-width: 400px) {
            .at4win {
                width: 100%
            }
        }

        @media screen and (max-height: 700px) and (max-width: 400px) {}


        .at-branding-logo span {
            text-decoration: none
        }

        .at-branding-info span {
            border: 0;
            clip: rect(0 0 0 0);
            height: 1px;
            margin: -1px;
            overflow: hidden;
            padding: 0;
            position: absolute;
            width: 1px
        }


        .s1 span {
            text-align: center;
            font-size: 15px;
            font-weight: bold;
            color: #00FF00;
        }

        .s1 span a {
            color: #00FF00
        }
    </style>
</head>

<body>


    <div class="top-links">
        <div class="center-hold">
            <div class="network">
                <strong></strong>
                <ul>
                </ul>
            </div>
            <div class="box tags-cloud">
                <!-- th:href="@{'/video/category?categoryId='+${item.categoryId}}"   -->
                <a class="highlight" href="/video" style="font-weight: bold; font-size: 13px;">首页</a> &nbsp;&nbsp;
                <a class="highlight category" th:each="item,stat:${categoryList}" th:data="${item.categoryId}"
                    th:style="${(stat.index+1) == stat.size} ?'color: #bfd128;font-weight: bold; font-size: 13px;':'font-weight: bold; font-size: 13px;' "
                    href="javascript:void(0); ">[[${item.categoryName}]] &nbsp;&nbsp;
                </a>
                <a class="highlight" href="/video" id="buy" style="font-weight: bold; color: #bfd128; font-size: 13px;">已购</a> &nbsp;&nbsp;

            </div>
            <!--        <div class="member-links">-->
            <!--            <ul>-->
            <!--                <li><a href="/video">首页</a></li>-->
            <!--                <ul th:if="${authMpEnabled==true}">-->
            <!--                    <li th:if="${user?.id}"><a href="/logout">注销</a></li>-->
            <!--                    <li th:unless="${user?.id}"><a href="/login">登录</a></li>-->
            <!--                </ul>-->
            <!--            </ul>-->
            <!--        </div>-->
        </div>
    </div>
    <div class="container">
        <!--    <div class="header">-->
        <!--        <div class="logo">-->
        <!--            <a href="javascript:"></a>-->
        <!--        </div>-->
        <!--        <div class="social-bookmarks">-->
        <!--            <div class="addthis_toolbox addthis_default_style addthis_32x32_style">-->
        <!--                <div class="atclear" tabindex="1000"></div>-->
        <!--            </div>-->
        <!--        </div>-->

        <!--        <div class="search" style="display: none">-->
        <!--            <form id="user-form">-->
        <!--                <span id="search" class="search-button">搜索</span>-->
        <!--                <div class="search-text"><input type="text" name="name" placeholder="请输入搜索关键词,至少两个字符" value=""></div>-->
        <!--            </form>-->
        <!--        </div>-->
        <!--    </div>-->

        <script type="text/javascript" th:src="@{/video/pagination.min.js}"></script>

        <div class="content">
            <div class="main-content">
                <div id="list_videos_most_recent_videos">
                    <div class="box">
                        <div class="list-videos">
                            <div class="margin-fix" id="list_videos_most_recent_videos_items">
                            </div>
                        </div>
                    </div>
                    <div class="pagination" id="list_videos_most_recent_videos_pagination">
                        <div class="pagination-holder">
                            <ul id="example-3" class="pagination"></ul>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <input type="hidden" id="categoryId" name="categoryId" th:value="${categoryId}" />

    <script type="text/javascript">


        $('#example-3').pagination({
            total: 10, // 总数据条数
            current: 1, // 当前页码
            length: 12, // 每页数据量
            size: 2, // 显示按钮个数
            /**
             * ajax请求远程数据
             * 此方法阻止按钮渲染
             * 直到调用refresh方法
             * @param  {[object]} options = {
             *      current: options.current,
             *      length: options.length,
             *      total: options.total
             *  }
             * @param  {[function]} refresh 回调函数以刷新分页按钮
             * @param  {[object]} $target [description]
             * @return {[type]}         [description]
             */
            ajax: function (options, refresh, $target) {
                $.showLoading("数据加载中");
                $.ajax({
                    type: 'post',
                    url: '/video/list',
                    data: {
                        pageNum: options.current,
                        pageSize: options.length,
                        categoryId: $("#categoryId").val()
                    },
                    dataType: 'json'
                }).done(function (res) {
                    $.hideLoading();
                    console.log(res);
                    // do something
                    // 请务必调用此方法，否则分页按钮不会刷新
                    if (res && res.code === 0) {
                        $("#list_videos_most_recent_videos_items").empty();
                        let html = "";
                        $.each(res.rows, function (i, row) {
                            var ctx = '';
                            html += '<div class="item  "> '
                                + '<a href="/video/detail?id=' + row.id + '&author=' + row.userid + '" title="' + row.name + '"> <div class="img"> <img class="thumb lazy-load" src="' + row.url + '"'
                                + 'data-original="' + row.url + '" alt="' + row.name + '" data-cnt="5" width="180"'
                                + 'height="135">  </div>  <strong class="' + row.name + '"> ' + row.name + '  </strong> '
                                + ' <div class="wrap">  <div class="duration">' + row.shijianStr + '</div></div>'
                                // + '  <div class="wrap">'
                                // + ' <div class="added"><em>' + row.diffDays + '</em></div>'
                                // + '   <div class="views">' + row.click + '</div>'
                                // + '  </div>'
                                + ' </a>'
                                + ' </div>';
                        });
                        $("#list_videos_most_recent_videos_items").html(html);
                    }

                    refresh({
                        total: res.total,// 可选
                        length: res.length // 可选
                    });
                }).fail(function (error) {

                });
            }
        });
        
        $("#buy").on('click', function () {
            $.ajax({
                dataType: 'json',
                type: 'post',
                url: '/video/buy',
                data: {
                    "pageNum": 1,
                    "pageSize": 48
                },
                success: function (res) {
                    $.hideLoading();
                    if (res && res.code === 0) {
                        $("#list_videos_most_recent_videos_items").empty();
                        let html = "";
                        $.each(res.rows, function (i, row) {
                            html += ' <div class="item  ">'
                                + '<a href="/video/detail?id=' + row.id + '&author=' + row.userid + '" title="' + row.name + '"> '
                                + '    <div class="img">'
                                + '        <img class="thumb lazy-load" src="' + row.url + '"  data-original="' + row.url + '" alt="' + row.name + '" data-cnt="5" width="180" height="135">'
                                + '    </div>'
                                + '    <strong class="title">' + row.name + '</strong>'
                                // + '    <div class="wrap">'
                                // + '        <div class="duration">' + row.shijianStr + '</div>'
                                // + '    </div>'
                                // + '    <div class="wrap">'
                                // + '        <div class="added"><em>' + row.diffDays + '</em></div>'
                                // + '       <div class="views">' + row.click + '</div>'
                                // + '   </div>'
                                + '   </a>'
                                + '   </div>';
                        });
                        $("#list_videos_most_recent_videos_items").html(html);
                    } else {
                        $.hideLoading();
                        $.toast(r.msg);
                    }
                }
            });
        });
        $(".category").on('click', function () {
            $.showLoading("数据加载中");
            var categoryId = $(this).attr("data");
            var name = $("input[name='name']").val();
            $.ajax({
                dataType: 'json',
                type: 'post',
                url: '/video/list',
                data: {
                    "name": name,
                    "categoryId": categoryId,
                    "pageNum": 1,
                    "pageSize": 48
                },
                success: function (res) {
                    $.hideLoading();
                    if (res && res.code === 0) {
                        $("#list_videos_most_recent_videos_items").empty();
                        let html = "";
                        $.each(res.rows, function (i, row) {
                            html += ' <div class="item  ">'
                                + '<a href="/video/detail?id=' + row.id + '&author=' + row.userid + '" title="' + row.name + '"> '
                                + '    <div class="img">'
                                + '        <img class="thumb lazy-load" src="' + row.url + '"  data-original="' + row.url + '" alt="' + row.name + '" data-cnt="5" width="180" height="135">'
                                + '    </div>'
                                + '    <strong class="title">' + row.name + '</strong>'
                                // + '    <div class="wrap">'
                                // + '        <div class="duration">' + row.shijianStr + '</div>'
                                // + '    </div>'
                                // + '    <div class="wrap">'
                                // + '        <div class="added"><em>' + row.diffDays + '</em></div>'
                                // + '       <div class="views">' + row.click + '</div>'
                                // + '   </div>'
                                + '   </a>'
                                + '   </div>';
                        });
                        $("#list_videos_most_recent_videos_items").html(html);
                    } else {
                        $.hideLoading();
                        $.toast(r.msg);
                    }
                }
            });
        });


        function onBridgeReady() {
            WeixinJSBridge.call('hideOptionMenu');
        }

        if (typeof WeixinJSBridge == "undefined") {
            if (document.addEventListener) {
                document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
            } else if (document.attachEvent) {
                document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
                document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
            }
        } else {
            onBridgeReady();
        }



    </script>
</body>

</html>